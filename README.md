## Дипломный практикум в Yandex.Cloud
----
#### Выполнил 
#### студент группы DEVOPS00000 
#### Храмов Василий Владимирович
----
  * [Цели:](#цели)
  * [Этапы выполнения:](#этапы-выполнения)
     * [Создание облачной инфраструктуры](#создание-облачной-инфраструктуры)
     * [Создание Kubernetes кластера](#создание-kubernetes-кластера)
     * [Создание тестового приложения](#создание-тестового-приложения)
     * [Подготовка cистемы мониторинга и деплой приложения](#подготовка-cистемы-мониторинга-и-деплой-приложения)
     * [Установка и настройка CI/CD](#установка-и-настройка-cicd)
  * [Что необходимо для сдачи задания?](#что-необходимо-для-сдачи-задания)
  * [Как правильно задавать вопросы дипломному руководителю?](#как-правильно-задавать-вопросы-дипломному-руководителю)

**Перед началом работы над дипломным заданием изучите [Инструкция по экономии облачных ресурсов](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD).**

---
## Цели:

1. Подготовить облачную инфраструктуру на базе облачного провайдера Яндекс.Облако.
2. Запустить и сконфигурировать Kubernetes кластер.
3. Установить и настроить систему мониторинга.
4. Настроить и автоматизировать сборку тестового приложения с использованием Docker-контейнеров.
5. Настроить CI для автоматической сборки и тестирования.
6. Настроить CD для автоматического развёртывания приложения.

---
## Этапы выполнения:


### Создание облачной инфраструктуры
Особенности выполнения:

В связи с ограничениями в бюджете купона инфраструктура проекта будет содержать минимальные конфигурации, достаточные для демонстрации основных целей проекта. 

Так все vm будут c 2 ядрами, 4Гб ОЗУ, 10Гб диска, 5% использования процессора.

Для выполнения поставленных целей, решено использовать 1 мастер-ноду, 2 worker-ноды, 1 runner-ноду(для запуска gitlab-runner)

Для экономии ресурсов, runner-нода будет выключена. Запуск этой ноды будет происходить автоматически при внесении изменений в исходники приложения.

Таким образом инфраструктура будет состоять из:

| Объект  |   Кол-во |
|----------|---------|
| network  |    1    |
| subnet   |     2   |
|   vm     |     4   |
|   cpu    |     8         |
| RAM      |   16 Гб       |
| Object Storage| 1 bucket |
| Cloud function| 1 |



 
Предварительная подготовка к установке и запуску Kubernetes кластера.

    Создайте сервисный аккаунт, который будет в дальнейшем использоваться Terraform для работы с инфраструктурой с необходимыми и достаточными правами. Не стоит использовать права суперпользователя
 
    
    Подготовьте backend для Terraform:
    а. Рекомендуемый вариант: S3 bucket в созданном ЯО аккаунте(создание бакета через TF) б. Альтернативный вариант: Terraform Cloud

    
    Создайте конфигурацию Terrafrom, используя созданный бакет ранее как бекенд для хранения стейт файла. Конфигурации Terraform для создания сервисного аккаунта и бакета и основной инфраструктуры следует сохранить в разных папках.

    
    Создайте VPC с подсетями в разных зонах доступности.
    
    Убедитесь, что теперь вы можете выполнить команды terraform destroy и terraform apply без дополнительных ручных действий.
    
    
    В случае использования Terraform Cloud в качестве backend убедитесь, что применение изменений успешно проходит, используя web-интерфейс Terraform cloud.

     
